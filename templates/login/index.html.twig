{% extends 'base.html.twig' %}

{% block title %}Anmeldung{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/login.css') }}">
{% endblock %}

{% block body %}
    {% set currentPage = 'login' %}

    <div class="page page--login">
        <header class="page__header">
            <a href="{{ path('app_home') }}" class="page__logo">
                <span class="page__logo-mark">SH</span>
                <span class="page__logo-text">
                    <strong>SmartHome</strong>
                    <small>Prototype</small>
                </span>
            </a>

            <nav class="page__nav" aria-label="Hauptnavigation">
                <a href="{{ path('app_home') }}" class="page__nav-link{{ currentPage == 'home' ? ' is-active' : '' }}">Übersicht</a>
                <a href="{{ path('app_status') }}" class="page__nav-link{{ currentPage == 'status' ? ' is-active' : '' }}">Status</a>
                <a href="{{ path('app_account') }}" class="page__nav-link{{ currentPage == 'account' ? ' is-active' : '' }}">Konto</a>
            </nav>

            <a href="{{ path('app_home') }}" class="page__cta page__cta--ghost">Zur Übersicht</a>
        </header>

        <main class="page__main">
            <section class="auth">
                <div class="auth__intro">
                    <span class="badge">Zugang</span>
                    <h1>Anmeldung zum SmartHome Dashboard</h1>
                    <p>Die Weboberfläche zeigt ausschließlich Messwerte aus deiner Installation. Steuerelemente findest du hier bewusst nicht – wir stellen Daten bereit, du interpretierst sie.</p>
                    <ul class="auth__benefits">
                        <li>Live-Sicht auf alle Sensorwerte</li>
                        <li>Klar strukturierte Visualisierung</li>
                        <li>Historie zum Nachvollziehen deiner Umgebung</li>
                    </ul>
                    <p class="auth__note">Nutze deine Controller-Zugangsdaten, um die Anzeigen freizuschalten.</p>
                </div>

                <div class="auth__panel">
                    <form class="auth__form" method="post" action="{{ path('app_login') }}">
                        <h2>Deine Zugangsdaten</h2>
                        {% if error is defined and error %}
                            <p class="auth__error">{{ error.messageKey|trans(error.messageData, 'security') }}</p>
                        {% endif %}
                        <label class="auth__field">
                            <span>E-Mail-Adresse</span>
                            <input type="email" name="email" value="{{ last_username|default('') }}" placeholder="name@example.com" required autocomplete="email">
                        </label>
                        <label class="auth__field">
                            <span>Passwort</span>
                            <input type="password" name="password" placeholder="••••••••" required autocomplete="current-password">
                        </label>
                        <label class="auth__remember">
                            <input type="checkbox" name="remember" value="1">
                            <span>Angemeldet bleiben</span>
                        </label>
                        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                        <button type="submit" class="button button--primary auth__submit">Jetzt anmelden</button>
                    </form>

                    <div class="auth__footer">
                        <p>Kontaktiere dein Projektteam, wenn du Unterstützung oder einen neuen Zugang benötigst.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
{% endblock %}
